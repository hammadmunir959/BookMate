# Unified RAG Microservice - Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# API KEYS AND AUTHENTICATION
# =============================================================================
GROQ_API_KEY=your_groq_api_key_here
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
HOST_PORT=8000
WORKERS=1

# =============================================================================
# RESOURCE LIMITS
# =============================================================================
CPU_LIMIT=2.0
MEMORY_LIMIT=4G
CPU_RESERVATION=0.5
MEMORY_RESERVATION=1G

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
CHROMA_DB_PATH=/app/data/chroma_db
SQLITE_DB_PATH=/app/data/sqlite/rag.db
CHROMA_COLLECTION_NAME=rag_documents
CHROMA_ALLOW_RESET=true
CHROMA_ANONYMIZED_TELEMETRY=false

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
EMBEDDING_CACHE_PATH=/app/data/cache/embeddings
RESPONSE_CACHE_PATH=/app/data/cache/responses
TEMP_CACHE_PATH=/app/data/cache/temp
CACHE_TTL_HOURS=24
EMBEDDING_CACHE_TTL_HOURS=168
RESPONSE_CACHE_TTL_HOURS=24
MAX_CACHE_SIZE_MB=1000

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
OMP_NUM_THREADS=1
MKL_NUM_THREADS=1
OPENBLAS_NUM_THREADS=1
MALLOC_ARENA_MAX=2

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
CORS_ORIGINS=*
API_KEY_HEADER=

# =============================================================================
# REDIS CONFIGURATION (Optional)
# =============================================================================
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://redis:6379/0

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================
BUILD_DATE=
VERSION=1.0.0
VCS_REF=

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
# Document Processing
MAX_DOCUMENT_SIZE_MB=10
ALLOWED_EXTENSIONS=.pdf,.html,.txt,.doc,.docx,.md,.rtf
CHUNK_SIZE=300
CHUNK_OVERLAP=40
MIN_CHUNK_SIZE=100
MAX_CHUNK_SIZE=500

# Retrieval Configuration
TOP_K_RETRIEVAL=5
TOP_K_MAX=20
SIMILARITY_THRESHOLD=0.2
HYBRID_WEIGHT=0.7
ENABLE_SEMANTIC_SEARCH=true
ENABLE_KEYWORD_SEARCH=true
ENABLE_HYBRID_SEARCH=true
ENABLE_QUERY_EXPANSION=true
ENABLE_RERANKING=true

# Generation Configuration
MAX_INPUT_LENGTH=16000
MAX_OUTPUT_TOKENS=2000
GENERATION_TEMPERATURE=0.1
TOP_P=0.9
PRESENCE_PENALTY=0.0
FREQUENCY_PENALTY=0.0
CITATION_STYLE=page
INLINE_CITATION_FORMAT=[CIT:{chunk_id}]
INCLUDE_CITATION_LIST=true
MAX_CONCURRENT_REQUESTS=5

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=120
RATE_LIMIT_BURST=20

# Health Check
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10